{"id":"Voice-0sw","content_hash":"d9c4086e34fa839e6d65c14dd44a81bcc4ea459d6c095ea60672cb8f0020adaa","title":"Sentence chunker module (split text into \u003c=max chars sentences)  Acceptance: unit tests cover punctuation \u0026 max length","description":"Implement sentence chunker in chunker.py: function chunk_text(text: str, max_chars: int=200) -\u003e List[str]. Steps: normalize whitespace, split sentences using regex (?\u003c=[.!?])\\s+, accumulate into buckets not exceeding max_chars (start new bucket if next sentence would exceed). Edge cases: extremely long single token (\u003emax_chars) split hard with hyphenation fallback; multiple punctuation; trailing spaces. Unit tests: test_split_basic, test_max_length_boundary, test_long_token_split, test_trailing_punctuation. Acceptance: all tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:29:59.2083808+01:00","updated_at":"2025-11-05T12:31:15.2120414+01:00"}
{"id":"Voice-1cm","content_hash":"c88a65ec633b21e051480100eed5b73216fa18d68a044721b22eacc54888ccb7","title":"Streaming controller (multi-chunk overlap \u0026 gap \u003c200ms)  Acceptance: playback log shows \u003c=200ms inter-chunk gap","description":"Implement streaming_controller.py: class StreamingController(provider, playback, metrics, chunker). Method run(text) -\u003e None: chunk text, for each chunk start request, stream frames; begin sending next chunk once first_frame of current chunk received (overlap). Track inter-chunk gap (playback_start of chunk n+1 minus chunk_complete of chunk n). Ensure gap \u003c=200ms for typical paragraph (\u003c1200 chars). Add log events chunk_start, first_frame, playback_start, chunk_complete. Provide integration test with simulated provider delay injection verifying gap constraint. Acceptance: playback log shows \u003c=200ms inter-chunk gap.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-05T12:30:35.8711419+01:00","updated_at":"2025-11-05T12:31:53.9036857+01:00"}
{"id":"Voice-28t","content_hash":"0875ca12d8a1d77faaa66fee575eaf08ab2e1252f8aa96d19ad0c2a7c4c47625","title":"Implement config loader (CLI \u003e ENV \u003e config file)  Acceptance: unit test precedence passes","description":"Implement configuration loader merging sources in precedence: CLI args \u003e ENV vars \u003e voicecli.toml \u003e defaults. Provide function load_config() returning dataclass. Include validation (numeric ranges for stability 0-1). Add unit tests covering precedence (e.g., ENV overrides file, CLI overrides ENV). Acceptance: pytest test_config_precedence passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-05T12:25:55.222964+01:00","updated_at":"2025-11-05T12:46:50.5326957+01:00","closed_at":"2025-11-05T12:46:50.5326957+01:00"}
{"id":"Voice-2ca","content_hash":"488b8b575c5a816c3f7c1f35e47c6699e97a5cbbc79b59e98c4a098d817b8294","title":"Structured JSON logging option (events: chunk_start, first_frame, playback_start, chunk_complete, retry, error)  Acceptance: sample run emits valid JSON lines","description":"Implement logging_utils.py supporting two modes: HUMAN (formatted text) and JSON (one JSON object per line). Provide log_event(event_type, **fields) ensuring API key redaction (****XXXX). Validate JSON schema includes timestamp, event_type, fields. Unit tests: test_json_logging_format, test_redaction, test_human_format_contains_event_type. Integration test: run sample synthesis and inspect captured logs. Acceptance: sample run emits valid JSON lines for --json-log flag.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:33:27.4892117+01:00","updated_at":"2025-11-05T12:36:41.5493947+01:00"}
{"id":"Voice-2ds","content_hash":"a9ce488b03c7aabb00e794eeb98d026496e7e0e2c78cdc04fe8cb38b87e10c8b","title":"Phrase-level audio cache (keyed by settings hash)  Acceptance: repeat phrase logs cache_hit and skips provider call","description":"Implement cache.py: class PhraseCache(cache_dir, ttl_seconds). Methods: get(key)-\u003eOptional[CachedItem], put(key, pcm_bytes, sample_rate). Key = SHA256(voice_id+model_id+stability+similarity+chunk_text). Store metadata JSON {created_at, sample_rate, byte_len}. Eviction: on init sweep expired entries. Integrate in streaming_controller: before provider.stream check cache, on cache hit push frames directly via playback engine (split into 100ms slices). Unit tests: test_key_determinism, test_store_and_get, test_expired_eviction. Integration test: repeat phrase logs cache_hit and provider not invoked (mock). Acceptance: repeat phrase uses cache and logs cache_hit.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-05T12:31:01.7372416+01:00","updated_at":"2025-11-05T12:32:27.7143635+01:00"}
{"id":"Voice-2fo","content_hash":"a291e8312cc776697135f04c21c8b183857414ffc2607a83b7a32521b31fe55d","title":"Scaffold project structure (src/voicecli, requirements.txt, initial modules)  Acceptance: run stub CLI prints help","description":"Create initial Python project structure: src/voicecli package with __init__.py, cli.py (stub), config.py, provider_base.py, playback.py. Add requirements.txt listing dependencies (sounddevice, websockets, requests). Provide setup instructions in README snippet. Acceptance: running python -m voicecli --help prints usage without errors.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-05T12:25:42.357513+01:00","updated_at":"2025-11-05T12:47:20.7869887+01:00","closed_at":"2025-11-05T12:47:20.7869887+01:00"}
{"id":"Voice-2zs","content_hash":"262a1adfe6a039b632b3f4e01821e50b292ff21b93777dc840b613fb36dd5bef","title":"Voice catalog fetch \u0026 24h cache (list \u0026 fuzzy match)  Acceptance: bd test lists \u003e=1 voice and cache file created","description":"Implement voice_catalog.py: function fetch_voices(force_refresh=False) using ElevenLabs REST GET /v1/voices with API key header. Cache JSON response to ~/.voicecli/voices.json (timestamp). On fetch if cache \u003c24h and not force_refresh, load file. Provide fuzzy_match(name_or_id)  voice_id using case-insensitive partial scoring (Levenshtein or simple contains). Unit tests: test_cache_logic(mock), test_fuzzy_match, test_force_refresh. Acceptance: voice list cached and fuzzy match returns expected voice id.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:30:49.0560363+01:00","updated_at":"2025-11-05T12:32:14.2835007+01:00"}
{"id":"Voice-45f","content_hash":"692d2b160ea3b220709857e2ef58e466b07fe6de03b68056bfcf3b035a9fd2e1","title":"WAV saving implementation (simultaneous streaming)  Acceptance: saved WAV duration matches playback within 100ms","description":"Implement wav_saver.py handling streaming PCM: on first frame open file and write RIFF header placeholder; append frames; on close/finalize update header sizes. Provide function attach_wav_sink(playback_engine, path) or integrated in PlaybackEngine with optional argument. Validate sample_rate consistency. Unit tests: test_wav_header_integrity (parse RIFF), test_duration_estimate (duration within 100ms tolerance). Integration test: playback + saved file have matching length. Acceptance: saved WAV duration matches playback within 100ms.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-05T12:33:00.3548075+01:00","updated_at":"2025-11-05T12:36:13.8891417+01:00"}
{"id":"Voice-577","content_hash":"07461d808180ae40c5d3eaf8fbcedbd4d34af236d0f38264990fc1448b07b9c0","title":"Dry-run mode (--dry-run flag)  Acceptance: displays chunk plan \u0026 provider settings without network calls","description":"Implement --dry-run flag in CLI: skip provider.connect and network calls. Output: chunk count, each chunk length, computed provider payload (voice_id, model_id, stability, similarity), estimated frame count based on heuristics (char_len -\u003e approx seconds). Ensure exit code 0. Unit test: test_dry_run_outputs_plan (captures stdout). Acceptance: displays chunk plan \u0026 provider settings without network calls.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-05T12:38:27.7420352+01:00","updated_at":"2025-11-05T12:39:21.3449769+01:00"}
{"id":"Voice-58f","content_hash":"b4b73091328188545f237c263ccaed2fc18db223fb35dc9b4ae7ba4383837ed4","title":"Minimal playback engine (PCM16 mono via sounddevice)  Acceptance: test plays 1s generated tone","description":"Implement playback engine using sounddevice OutputStream (mono PCM16). Expose class PlaybackEngine(start(sample_rate), submit(pcm_bytes), flush_and_close()). Generate a 1s 440Hz sine wave test to validate audio path (test_playback_tone). Handle exceptions (e.g., PortAudioError) and map to custom AudioDeviceError. Acceptance: test_playback_tone plays without exception.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-05T12:26:09.6273456+01:00","updated_at":"2025-11-05T12:48:25.317097+01:00","closed_at":"2025-11-05T12:48:25.317097+01:00"}
{"id":"Voice-7ga","content_hash":"432ca228742bb5afedcaab871d7e7e43c85a417d69b66707de4ba078dec09f74","title":"Error handling \u0026 retry logic (network, rate limit, auth)  Acceptance: simulated transient failures recover; final error surfaces","description":"Implement errors.py defining custom exceptions: ProviderConnectionError, ProviderRateLimitError(retry_after), ProviderAuthError, ProviderNetworkError, AudioDeviceError. Add retry logic in streaming_controller: exponential backoff base 0.3s jitter for network/rate limit (max 2 retries). Simulate failures in tests using mock provider raising exceptions. Unit tests: test_rate_limit_retry, test_network_retry_stops_after_max, test_auth_fail_fast. Acceptance: simulated transient failures recover; final error surfaces with correct exception type.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:33:14.9517122+01:00","updated_at":"2025-11-05T12:36:27.0756851+01:00"}
{"id":"Voice-7gi","content_hash":"b5f253baae29a11eb6b7f781241d1a8bd1390cd92ef23aa6162c62c482f1279c","title":"Documentation updates (README quick start \u0026 latency notes)  Acceptance: README includes install, API key, sample run, metrics explanation","description":"README sections: Overview; Features; Quick Start (install deps, set ELEVENLABS_API_KEY, run example); Config precedence; Latency metrics (definitions + targets); JSON logging example; Troubleshooting (audio device, missing key). Acceptance: README includes install, API key, sample run, metrics explanation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-05T12:38:10.4705349+01:00","updated_at":"2025-11-05T12:39:08.3994091+01:00"}
{"id":"Voice-buy","content_hash":"5e9665c1b286865822965c1fabf5ba092f95db0653535d227667c8091a50b550","title":"Provider base + ElevenLabs stub (simulated frames)  Acceptance: stub returns 5 frames for input","description":"Create provider_base.TTSProvider ABC with methods connect(), stream(text_chunk, settings)-\u003eiterator[AudioFrame], list_voices(force_refresh=False), close(). Implement elevenlabs_provider.ElevenLabsProvider stub that simulates streaming: splits input into 5 frames of 200ms silence or generated tone PCM16. Include AudioFrame dataclass. Provide unit test test_stub_stream_returns_5_frames. Acceptance: test passes and stub integrates with playback.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-05T12:26:28.0776233+01:00","updated_at":"2025-11-05T12:50:01.8023467+01:00","closed_at":"2025-11-05T12:50:01.8023467+01:00"}
{"id":"Voice-ffc","content_hash":"3021bbf0f57225f18bbcdd2b5bd39619603b5ff861a3e8c8b76a2a6b1002d6c0","title":"Latency metrics instrumentation (timestamps, per-chunk \u0026 summary)  Acceptance: metrics JSON includes required fields","description":"Add metrics.py with ChunkMetrics(dataclass: chunk_index, char_len, request_start, first_frame, playback_start, chunk_complete), compute derived properties (synthesis_latency, startup_latency, buffer_fill_latency). Maintain list; after all chunks produce summary JSON: p95_first_frame, p95_startup, avg_inter_chunk_gap. Provide function emit_metrics_json(metrics_list, path=None). Unit tests: test_metrics_derivations, test_summary_calculations. Acceptance: metrics JSON includes required fields and tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:30:23.2842356+01:00","updated_at":"2025-11-05T12:31:34.4866035+01:00"}
{"id":"Voice-iio","content_hash":"3fbf9fd0da4c29c1725efced105d53c53b4db14261ae5e225ce79ddd9da58c32","title":"Test suite foundation (pytest config, core unit tests, mock provider)  Acceptance: pytest passes locally","description":"Set up pytest: add tests/ directory with __init__.py, conftest.py. Implement unit tests: chunker, config precedence, cache, metrics derivations, voice_catalog fuzzy match (mock REST). Add mock provider fixture yielding synthetic frames. Integrate GitHub Actions workflow (future) placeholder. Acceptance: pytest passes locally with all tests green.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:33:40.1613128+01:00","updated_at":"2025-11-05T12:36:54.1659309+01:00"}
{"id":"Voice-ngr","content_hash":"346be7c7bab121fdcc64d0b4437d28de176adac81f6754376ac66191d88ab830","title":"Latency harness script (tools/latency_harness.py)  Acceptance: generates latency_report.json with p95 metrics fields","description":"Implement tools/latency_harness.py: runs synthesis on standard paragraph (embedded constant text ~800 chars) for N=5 iterations, collects metrics summary (avg, p95 first_frame, p95 startup, avg inter_chunk_gap) using metrics module, writes latency_report.json. Provide CLI flags --iterations, --output. Unit tests: test_report_schema (mock metrics). Manual acceptance: run harness and verify JSON fields. Acceptance: latency_report.json generated with p95 metrics fields.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-05T12:33:53.3206559+01:00","updated_at":"2025-11-05T12:37:37.9358985+01:00"}
{"id":"Voice-r90","content_hash":"bc754f8ad6feede9c91c507eb858fc0acceb5b1c74eb7ebfde6d04af9d739752","title":"CLI MVP (single chunk synthesis \u0026 playback)  Acceptance: input text speaks (\u003c1.5s startup)","description":"Implement CLI main to parse input text/file/stdin, load config, create provider stub and playback engine, stream one chunk, support flags voice/model/stability/similarity, log startup latency. Acceptance: speaks audio under target latency.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-11-05T12:26:40.7924505+01:00","updated_at":"2025-11-05T12:50:23.6244985+01:00"}
{"id":"Voice-u1n","content_hash":"5f0855c209262e711bc24fd1d405ec0e431fcaaedcdcbb2bf6f527ebdcfb23c3","title":"Adaptive buffering \u0026 chunk sizing (respond to underruns and high latency)  Acceptance: log adjustments prebuffer_ms changes and chunk_max_chars reductions","description":"Implement adaptive logic in streaming_controller: track moving averages of synthesis_latency and buffer underruns. If underrun count \u003e2 in last 5 chunks, increase prebuffer_ms +20ms (cap 200ms). If p95 synthesis_latency \u003e target (600ms) over last 5 chunks, reduce chunk_max_chars by 20% (floor 80). Log events: adaptive_prebuffer_increase, adaptive_chunk_reduction with new values. Unit tests: test_prebuffer_increase_condition, test_chunk_reduction_condition (simulate metrics). Acceptance: log adjustments prebuffer_ms changes and chunk_max_chars reductions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-05T12:38:40.7726024+01:00","updated_at":"2025-11-05T12:39:34.5459194+01:00"}
